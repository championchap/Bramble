!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Bramble=t():e.Bramble=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/js/",n(n.s=2)}([function(e,t){function n(e,t){var o=e,l=t,i=function(){return Math.sqrt(o*o+l*l)},a=function(e){o*=e,l*=e},c=function(){var e=i();o/=e,l/=e};return{add:function(e){o+=e.x,l+=e.y},addScalar:function(e){o+=e,l+=e},clone:r,divide:function(e){o/=e.x,l/=e.y},divideScalar:function(e){o/=e,l/=e},dot:function(e){return o*e.x+l*e.y},getLength:i,getOpposite:function(e){return n(-e.x,-e.y)},getPerp:function(){return n(-l,o)},isEqualTo:function(e){return o==e.x&&l==e.y},multiply:function(e){o*=e.x,l*=e.y},multiplyScalar:a,normalise:c,setLength:function(e){c(),a(e)},subtract:function(e){o-=e.x,l-=e.y},subtractScalar:function(e){o-=e,l-=e},set x(e){o=e},get x(){return o},set y(e){l=e},get y(){return l}}}var r=function(e){return n(e.x,e.y)};e.exports={clone:r,create:n,fromDegrees:function(e){var t=e*(Math.PI/180);return n(Math.cos(t),Math.sin(t))}}},function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],o=0;o<t;o++){for(var l=[],i=0;i<e;i++)l.push(n);r.push(l)}return r}var i={pos:{x:0,y:0},visible:!0,divisions:4,tileWidth:8,tileHeight:8,scale:1};e.exports={create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;n=r({},i,{},n);var o=l(e,t,0),a={x:n.pos.x,y:n.pos.y},c=n.visible,d=n.divisions,u=n.tileWidth,s=n.tileHeight,f=n.tileWidth,b=n.scale;return{divisions:d,pos:a,tileHeight:s,tiles:o,tileWidth:u,visible:c,width:e,height:t,tileSize:f,scale:b}}}},function(e,t,n){"use strict";n.r(t);var r={create:function(e,t,n,r){return{name:e,type:t,image:n,tiles:r}}};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(n,r){var o=new XMLHttpRequest;o.responseType=t,o.addEventListener("load",(function(e){switch(t){case"text":n(e.target.responseText);break;case"json":n(e.target.response);break;default:console.error("invalid type provided to load: ".concat(t," is unknown"))}})),o.addEventListener("error",(function(e){r(e)})),o.open("GET",e,!0),o.send()}))}function l(e){return o(e,"json")}function i(e){return new Promise((function(t,n){var r=new Image;r.addEventListener("load",(function(e){t(r)})),r.addEventListener("error",(function(e){n(e)})),r.src=e}))}function a(e){return new Promise((function(t,n){var r=new Audio;r.addEventListener("canplaythrough",(function(e){t(r)})),r.addEventListener("error",(function(e){n(e)})),r.src=e}))}function c(e){var t=null;return l(e).then((function(e){return i((t=e).path)})).then((function(e){return r.create(t.name,t.type,e,t.tiles)})).catch((function(e){console.error(e)}))}var d={loadText:function(e){return o(e,"text")},loadJson:l,loadImage:i,loadAllText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(e.map((function(e){return o(e,"text")})))},loadAllImages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(e.map((function(e){return i(e)})))},loadSound:a,loadAllSounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(e.map((function(e){return a(e)})))},loadTerrain:c,loadAllTerrain:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(e.map((function(e){return c(e)})))}};var u={toRadians:function(e){return e*(Math.PI/180)},toDegrees:function(e){return e*(180/Math.PI)}},s=null;var f={fill:{color:"#ffffff",opacity:1},line:{width:2,color:"#000000",opacity:1}};function b(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f;void 0!==o.fill&&(s.fillStyle=o.fill.color,s.fillRect(e,t,n,r)),void 0!==o.line&&(s.strokeStyle=o.line.color,s.lineWidth=o.line.width,s.strokeRect(e,t,n,r))}var h={width:2,color:"#000000"};var p={fill:{color:"#000000",opacity:1},line:{color:"#ffffff",opacity:1,width:2}};function v(e,t,n,r,o){s.drawImage(o,e,t,n,r)}function g(e,t,n,r,o,l,i,a,c){s.drawImage(c,o,l,i,a,e,t,n,r)}var y={shadowColor:"#000000",shadowBlur:6,shadowOffsetX:4,shadowOffsetY:4};var m={circle:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p;void 0!==r.fill&&(s.fillStyle=r.fill.color),s.beginPath(),s.strokeStyle=r.line.color,s.lineWidth=r.line.width,s.arc(e,t,n,0,2*Math.PI),s.closePath(),void 0!==r.fill&&s.fill(),s.stroke()},clear:function(e){b(0,0,s.canvas.width,s.canvas.height,{fill:{color:e}})},image:v,line:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;s.strokeStyle=n.color,s.lineWidth=n.width,s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y),s.stroke()},rect:b,getContext:function(){return s},setContext:function(e){s=e},sprite:function(e){var t=e.width/2,n=e.height/2;s.save(),s.translate(e.x+t,e.y+n),s.rotate(u.toRadians(e.rotation)),e.frames.length>1?g(-t,-n,e.width,e.height,e.frames[e.frame].x,e.frames[e.frame].y,e.frames[e.frame].width,e.frames[e.frame].height,e.texture):v(-t,-n,e.width,e.height,e.texture),s.restore()},square:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f;b(e,t,n,n,r)},subImage:g,text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#000000",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"16pt sans-serif";s.fillStyle=r,s.font=o,s.textAlign="left",s.textBaseline="top",s.fillText(n,e,t)},textbox:function(e){s.fillStyle="#ffffff",s.font="16pt sans-serif",s.textAlign="left",s.textBaseline="top",s.measureText(e.text).width>e.width&&(e.text=e.text.substr(0,10)+"\n"+e.text.substr(10)),s.fillText(e.text,e.x,e.y)},tiles:function(e,t,n,r,o,l,i){for(var a=1,c=2,d=4,u=8,s=16,f=32,b=64,h=128,p=function(l){for(var i=function(i){if(0===n[l][i])return"continue";var p=l>0?n[l-1][i-1]:0,v=l>0?n[l-1][i]:0,y=l>0?n[l-1][i+1]:0,m=n[l][i-1],w=n[l][i],x=n[l][i+1],O=l<n.length-1?n[l+1][i-1]:0,j=l<n.length-1?n[l+1][i]:0,P=l<n.length-1?n[l+1][i+1]:0,S=a*(w===v&&w===m&&w===p?1:0)+c*(w===v?1:0)+d*(w===v&&w===x&&w===y?1:0)+u*(w===x?1:0)+s*(w===j&&w===x&&w===P?1:0)+f*(w===j?1:0)+b*(w===j&&w===m&&w===O?1:0)+h*(w===m?1:0),k=r.filter((function(e){return e.type===n[l][i]}))[0],E=k.tiles.filter((function(e){return e.type===S})),L=E[Math.floor(Math.random()*E.length)];L?function(e,t,n,r,o,l,i,a,c,d){g(e+a*(r*c),t+a*(o*d),a*c,a*d,c*l,d*i,c,d,n)}(e,t,k.image,i,l,L.position.x,L.position.y,o,L.size.width,L.size.height):console.log("Tile not defined ".concat(S))},p=0;p<n[l].length;p++)i(p)},v=0;v<n.length;v++)p(v)},shadow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;s.save(),s.shadowColor=t.shadowColor,s.shadowBlur=t.shadowBlur,s.shadowOffsetX=t.shadowOffsetX,s.shadowOffsetY=t.shadowOffsetY,e(),s.restore()},dodge:function(e){s.save(),s.globalCompositeOperation="color-dodge",e(),s.restore()},overlay:function(e){s.save(),s.globalCompositeOperation="overlay",e(),s.restore()},transparency:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25;s.save(),s.globalAlpha=t,e(),s.restore()}},w=document.createElement("canvas"),x=w.getContext("2d");var O={element:w,setSize:function(e,t){w.width=e,w.height=t},attachTo:function(e){e.appendChild(w),m.setContext(x)},setSmoothing:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];x.imageSmoothingEnabled=e},disableContextMenu:function(){w.addEventListener("contextmenu",(function(e){e.preventDefault()}))}};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S,k=(S={pressed:!1,justPressed:!1,released:!1,justReleased:!1},[{code:8,label:"backspace"},{code:9,label:"tab"},{code:13,label:"enter"},{code:16,label:"shift"},{code:17,label:"ctrl"},{code:18,label:"alt"},{code:20,label:"caps"},{code:27,label:"escape"},{code:32,label:"space"},{code:33,label:"pageUp"},{code:34,label:"pageDown"},{code:35,label:"end"},{code:36,label:"home"},{code:37,label:"left"},{code:38,label:"up"},{code:39,label:"right"},{code:40,label:"down"},{code:45,label:"insert"},{code:46,label:"delete"},{code:48,label:"zero"},{code:49,label:"one"},{code:50,label:"two"},{code:51,label:"three"},{code:52,label:"four"},{code:53,label:"five"},{code:54,label:"six"},{code:55,label:"seven"},{code:56,label:"eight"},{code:57,label:"nine"},{code:65,label:"A"},{code:66,label:"B"},{code:67,label:"C"},{code:68,label:"D"},{code:69,label:"E"},{code:70,label:"F"},{code:71,label:"G"},{code:72,label:"H"},{code:73,label:"I"},{code:74,label:"J"},{code:75,label:"K"},{code:76,label:"L"},{code:77,label:"M"},{code:78,label:"N"},{code:79,label:"O"},{code:80,label:"P"},{code:81,label:"Q"},{code:82,label:"R"},{code:83,label:"S"},{code:84,label:"T"},{code:85,label:"U"},{code:86,label:"V"},{code:87,label:"W"},{code:88,label:"X"},{code:89,label:"Y"},{code:90,label:"Z"},{code:91,label:"superLeft"},{code:92,label:"superRight"},{code:93,label:"select"},{code:96,label:"num0"},{code:97,label:"num1"},{code:98,label:"num2"},{code:99,label:"num3"},{code:100,label:"num4"},{code:101,label:"num5"},{code:102,label:"num6"},{code:103,label:"num7"},{code:104,label:"num8"},{code:105,label:"num9"},{code:106,label:"multiply"},{code:107,label:"add"},{code:109,label:"subtract"},{code:110,label:"point"},{code:111,label:"divide"},{code:112,label:"F1"},{code:113,label:"F2"},{code:114,label:"F3"},{code:115,label:"F4"},{code:116,label:"F5"},{code:117,label:"F6"},{code:118,label:"F7"},{code:119,label:"F8"},{code:120,label:"F9"},{code:121,label:"F10"},{code:122,label:"F11"},{code:123,label:"F12"},{code:144,label:"numLock"},{code:145,label:"scrollLock"},{code:186,label:"semiColon"},{code:187,label:"equals"},{code:188,label:"comma"},{code:189,label:"dash"},{code:190,label:"dot"},{code:191,label:"forewardSlash"},{code:192,label:"graveAccent"},{code:219,label:"openBracket"},{code:220,label:"backSlash"},{code:221,label:"closeBracket"},{code:222,label:"singleQuote"}].reduce((function(e,t){var n=t.label;return delete t.label,e[n]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},S),e}),{}));function E(e,t){for(var n=null,r=Object.keys(t),o=0;o<r.length;o++)t[r[o]].code===e.keyCode&&(n=t[r[o]]);return n}function L(e){!function(e){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&e.preventDefault()}(e),E(e,k).pressed=!0}function R(e){E(e,k).pressed=!1}var T={start:function(){document.addEventListener("keydown",L),document.addEventListener("keyup",R)},update:function(){},state:k},D=n(0),M=n.n(D);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=W(),B=W();function I(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{pressed:!1,justPressed:!1,released:!1,justReleased:!1},{moved:!1})}function W(){var e=document.getElementById("app-container");return{x:0,y:0,left:{pressed:!1,justPressed:!1,released:!1,justReleased:!1},wheel:I(),right:{pressed:!1,justPressed:!1,released:!1,justReleased:!1},get cursor(){return e.style.cursor},set cursor(t){void 0===t&&(t="auto"),e.style.cursor=t}}}function q(e){var t=function(e,t){var n=w.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}(e);B.x=t.x,B.y=t.y,B.moved=!0}function z(e){switch(e.which){case 1:B.left.pressed=!0;break;case 2:B.middle.pressed=!0;break;case 3:B.right.pressed=!0}}function X(e){switch(e.which){case 1:B.left.pressed=!1;break;case 2:B.middle.pressed=!1;break;case 3:B.right.pressed=!1}}function Y(e){B.wheel.moved=0!==e.delta,!1!==B.wheel.moved&&(B.wheel.direction=e.deltaY<0?"up":"down")}var _={start:function(){w.addEventListener("mousemove",q),w.addEventListener("mousedown",z),w.addEventListener("mouseup",X),w.addEventListener("wheel",Y),B.x=w.width/2,B.y=w.height/2},update:function(){B.wheel.moved=!1,B.x===A.x&&B.y===A.y&&(B.moved=!1);var e,t=(e=B,Object.assign({},e));A.x=t.x,A.y=t.y,A.left.pressed=t.left.pressed,A.left.justPressed=t.left.justPressed,A.left.released=t.left.released,A.left.justReleased=t.left.justReleased,A.wheel.pressed=t.wheel.pressed,A.wheel.justPressed=t.wheel.justPressed,A.wheel.released=t.wheel.released,A.wheel.justReleased=t.wheel.justReleased,A.right.pressed=t.right.pressed,A.right.justPressed=t.right.justPressed,A.right.released=t.right.released,A.right.justReleased=t.right.justReleased},prevState:A,state:B};var H=T.state,U=_.state,G=_.prevState,J={start:function(){T.start(),_.start()},update:function(){T.update(),_.update()}},Q="#000000",K=null,N=null;function V(){K&&K(1/60),N&&(m.clear(Q),N()),J.update(),window.requestAnimationFrame(V)}var Z={setSize:O.setSize,setUpdate:function(e){K=e},setRender:function(e){N=e},setBackgroundColor:function(e){Q=e},attachTo:O.attachTo,disableContextMenu:O.disableContextMenu,setSmoothing:O.setSmoothing,start:function(){J.start(),window.requestAnimationFrame(V)}},$=n(1),ee=n.n($);var te={},ne={};function re(e,t){for(var n in t){(l=t[n]).configurable=l.enumerable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,n,l)}if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(t),o=0;o<r.length;o++){var l,i=r[o];(l=t[i]).configurable=l.enumerable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,i,l)}return e}var oe={create:function(){var e,t,n,r,o,l,i,a,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"#ffffff",p=[];return i={x:c,y:d,width:u,height:s,rotation:f,texture:b,color:h,frame:0,setFrames:function(e){p=e},addFrame:function(e){p.push(e)},get frames(){return p}},(a={})[e="x"]=a[e]||{},a[e].get=function(){return c},a[t="x"]=a[t]||{},a[t].set=function(e){c=e},a[n="y"]=a[n]||{},a[n].get=function(){return d},a[r="y"]=a[r]||{},a[r].set=function(e){d=e},a[o="rotation"]=a[o]||{},a[o].get=function(){return f},a[l="rotation"]=a[l]||{},a[l].set=function(e){f=e>=360?360-e:e},re(i,a),i}};var le={create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return{x:e,y:t,width:n,height:r,text:o}}};n.d(t,"assets",(function(){return d})),n.d(t,"game",(function(){return Z})),n.d(t,"grid",(function(){return ee.a})),n.d(t,"graphics",(function(){return m})),n.d(t,"keyboard",(function(){return H})),n.d(t,"mouse",(function(){return U})),n.d(t,"prevMouse",(function(){return G})),n.d(t,"music",(function(){return te})),n.d(t,"sfx",(function(){return ne})),n.d(t,"sprite",(function(){return oe})),n.d(t,"textbox",(function(){return le})),n.d(t,"vec2",(function(){return M.a}))}])}));